if(!Motive)var Motive={};Motive.executeInContext=function(fn){if(fn==null)return;var ctx=Motive.getTemplateContext();fn.apply(ctx,Array.prototype.slice.call(arguments,1));}
Motive.getTemplateContext=function(){if(Motive._template_context==null){if(smc&&smc.Logger){smc.Logger.error("Template context requested outside of the scope of template rendering.  This is a bug within the calling code and should be investigated");}
var logger=smc.Logger;}
return Motive._template_context;}
Motive.ResponseTimer=function(){this.UNINITIALIZED_TIME=-1;this.REPORT_KEY_PREFIX="_rp_";this.requestStarted=function(request_id){viewingTime=getMS()-responseRenderedTime;self.reset();requestID=request_id;startTime=getMS();}
this.ajaxCall=function(){ajaxCallTime=getMS();}
this.responseReceived=function(){responseReceivedTime=getMS();}
this.responseRendered=function(){responseRenderedTime=getMS();}
this.captureViewingTime=function(){viewingTime=getMS()-responseRenderedTime;}
this.reset=function(){startTime=self.UNINITIALIZED_TIME;ajaxCallTime=self.UNINITIALIZED_TIME;responseReceivedTime=self.UNINITIALIZED_TIME;responseRenderedTime=self.UNINITIALIZED_TIME;requestFlowName=null;requestFlowStep=null;}
this.getReportBundle=function(){if(startTime==self.UNINITIALIZED_TIME||ajaxCallTime==self.UNINITIALIZED_TIME||responseReceivedTime==self.UNINITIALIZED_TIME||responseRenderedTime==self.UNINITIALIZED_TIME)
return{};var prefix=self.REPORT_KEY_PREFIX;var bundle={};bundle[prefix+"st"]=startTime;bundle[prefix+"resp"]=responseReceivedTime-startTime;bundle[prefix+"rend"]=responseRenderedTime-responseReceivedTime;bundle[prefix+"id"]=requestID;bundle[prefix+"t1"]=startTime;bundle[prefix+"t2"]=ajaxCallTime;bundle[prefix+"t5"]=responseReceivedTime;bundle[prefix+"t6"]=responseRenderedTime;bundle[prefix+"t1Next"]=viewingTime;return bundle;}
function getMS(){return(new Date()).getTime();}
var startTime;var ajaxCallTime;var responseReceivedTime;var responseRenderedTime;var requestID;var viewingTime;var self=this;this.reset();return this;};Motive.WorkflowImpl=function(){var _wfActionExecuting=false;var dictionaryWindow;var stepInfo={engineProcId:"-1",procID:"-1",flowName:"Unknown",stepName:"Unknown",stepID:null};var logger=null;var g_pollerId=null;var g_polling=false;var g_context=null;var g_contextPath="";var g_actionMappings={"DoStep":"/DoStep.do","Reload":"/Reload.do","DoHandleEvent":"/DoHandleEvent.do","Suspend":"/Suspend.do","Resume":"/Resume.do","Start":"/Start.do","Feedback":"/Feedback.do","Dictionary":"/Dictionary.do","GridData":"/GridData.do","EndWorkflowExecution":"/EndWorkflowExecution.do"};var g_restartParams={};var workflowName=null;var _self=null;var g_domContainerJQElement=$(document.body);var g_breadcrumbControl=null;var g_responseTimer=new Motive.ResponseTimer();var g_requestID=1;var g_ajaxTimeout=60000;var _startWFAction=function(){_wfActionExecuting=true;_triggerEventHandlers("startWFAction");};var _endWFAction=function(){_wfActionExecuting=false;_triggerEventHandlers("enableWFActions");};var _triggerEventHandlers=function(eventID,data){_self.globalEvents.trigger(eventID,data);_self.localEvents.trigger(eventID,data);};var _doPoll=function(params){g_polling=true;if(params==null){params={};}
params.context=g_context;params.time=new Date().getTime();if(params.signal){params.stepID=stepInfo.stepID;}
if(params.signal){g_responseTimer.ajaxCall();}
jQuery.ajax({url:_self.getActionUrl("DoStep"),type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",timeout:g_ajaxTimeout,data:params,success:_handleStep,error:function(xhr,status,err){logger.error("ajax error! status = "+status+": "+err);if($.browser.msie){xhr.abort();}
_triggerEventHandlers("requestError",{textStatus:status,error:err});_self.stopPoller();_self.startPoller(params);}});};var _handleStep=function(data,textStatus,xhr,options){var opts=(options)?options:{};if(xhr!=null&&xhr.getResponseHeader("wf-done")==="true"){var bcControl=_self.getBreadcrumbControl();if(bcControl!=null){bcControl.jBreadCrumb("disable");}
_triggerEventHandlers("endExecution",{context:g_context,workflow:workflowName});}
else if(data&&data.length>0){Motive._template_context={wf:_self};try{if(xhr!=null&&xhr.getResponseHeader("wf-forceReload")==="true"){_reload();}else{g_responseTimer.responseReceived();_self.stopPoller();_self.cleanTemplateContext();_self.setStepInfoFromXHR(xhr);_self.drawStepContent(data,opts);_self.cleanTinyMCELinks();_triggerEventHandlers("contentLoad");_endWFAction();if(xhr.getResponseHeader("wf-done-template")==="true"){_triggerEventHandlers("endExecution",{context:g_context,workflow:workflowName});}
g_responseTimer.responseRendered();}}catch(e){_self.doAlertDialog(e.name,smc.Resources.messages['dialogs.alert.message'],e.message);}finally{Motive._template_context=null;}}
else{_self.startPoller();}
g_polling=false;};var _reload=function(){var params={context:g_context};window.location=_self.getActionUrl("Reload",params);}
var _handleEvent=function(data){_handleStep(data);};var _doFirstClassEventNotify=function(event,paramObj,bubble){logger.debug("_doFirstClassEventNotify::"+event);var result=true;var evt=new jQuery.Event(event);var doBubble=(bubble!==undefined)?bubble:true;_triggerEventHandlers(evt,paramObj);if(evt.isDefaultPrevented()){logger.debug("_doFirstClassEventNotify::event "+event+" stopped by handler");return false;}
if(doBubble){result=_doEventNotify(event,paramObj);}
return result;};var _doEventNotify=function(event,paramObj){logger.debug("_doEventNotify::"+event);var evt=new jQuery.Event("event");var eventParams={"name":event,"params":paramObj};_triggerEventHandlers(evt,eventParams);if(evt.isDefaultPrevented()){logger.debug("_doEventNotify::event "+event+" stopped by handler");return false;}
return true;};return{local:{},data:{},localEvents:new jQuery("<span></span>"),globalEvents:new jQuery("<span></span>"),ctx:function(){return this.local;},getInstance:function(){return _self;},getLogger:function(){return logger;},isWorkflowActionExecuting:function(){return _wfActionExecuting;},isPolling:function(){return g_polling;},setContextPath:function(path){g_contextPath=path;},getContextPath:function(path){return g_contextPath;},getActionUrl:function(actionId,params){var rslt=g_contextPath;var mappedAction=g_actionMappings[actionId];var paramString=null;if(params!=null){if(typeof params=="string")
paramString=params;else if(!$.isEmptyObject(params))
paramString=$.param(params);}
if(mappedAction!=null){rslt+=mappedAction;if(paramString!=null){if(mappedAction.indexOf("?")>=0)
rslt+="&"+paramString;else
rslt+="?"+paramString;}}
return rslt;},setRestartParams:function(params){g_restartParams=params;},getRestartParams:function(params){return g_restartParams;},setContext:function(context){g_context=context;},getContext:function(){return g_context;},getBreadcrumbControl:function(){return g_breadcrumbControl;},setBreadcrumbControl:function(ctrl){g_breadcrumbControl=ctrl;},getContainerElement:function(){return g_domContainerJQElement;},$:function(selector){return this.getContainerElement().find(selector);},startPoller:function(firstPollParams){if(g_pollerId!=null){return;}
var firstPoll=true;g_pollerId=setInterval(function(){if(!g_polling&&g_pollerId!=null){var params=null;if(firstPoll){params=firstPollParams;firstPoll=false;}
_doPoll(params);}},1000);},stopPoller:function(){if(g_pollerId==null){g_polling=false;return;}
clearInterval(g_pollerId);g_pollerId=null;g_polling=false;},submitWFAction:function(params){if(_self.isWorkflowActionExecuting()){return false;}
if(params.signal==='goToStep'){Motive.isGoToStep=true;}else{Motive.isGoToStep=false;}
var repBundle=g_responseTimer.getReportBundle();var newRequestID=g_requestID++;g_responseTimer.requestStarted(newRequestID);repBundle["_rp_nid"]=newRequestID;_startWFAction();if(params!=null){$.extend(repBundle,params);}
_doPoll(repBundle);return true;},doEvent:function(event,paramObj){if(paramObj==null){paramObj={};}
if(!_doEventNotify(event,paramObj)){return false;};if(event=="cancel"||event=="suspend"){var repBundle=g_responseTimer.getReportBundle();$.extend(paramObj,repBundle);g_responseTimer.requestStarted();}
paramObj.context=g_context;paramObj.time=new Date().getTime();paramObj.eventName=event;g_polling=true;if(event=="cancel"||event=="suspend"){g_responseTimer.ajaxCall();}
jQuery.post(_self.getActionUrl("DoHandleEvent"),paramObj,_handleEvent);return true;},doSuspend:function(paramObj){if(paramObj==null){paramObj={};}
var onOk=function(){if(_self.isWorkflowActionExecuting()){return false;}
if(!_doFirstClassEventNotify("suspend",paramObj)){return false;}
_startWFAction();paramObj.context=g_context;paramObj.time=new Date().getTime();var opts={disableBreadcrumb:true};jQuery.post(_self.getActionUrl("Suspend"),paramObj,function(data,textStatus,xhr){_handleStep(data,textStatus,xhr,opts);});};_self.doConfirmDialog("dialogs.suspend.title","dialogs.suspend.message",onOk);},doResume:function(paramObj){if(!_doFirstClassEventNotify("resume",paramObj)){return false;};g_restartParams['logWorkflowResume']=true;g_restartParams['workflowExecutionId']=paramObj.workflowExecutionId;window.location=_self.getActionUrl("Resume",g_restartParams);},doRestart:function(){if(!_doFirstClassEventNotify("restart")){return false;};var bcControl=_self.getBreadcrumbControl();if(bcControl!=null){bcControl.jBreadCrumb("enableHistory");}
window.location=_self.getActionUrl("Start",g_restartParams);},doEndAndRestart:function(paramObj){if(!_doFirstClassEventNotify("restart",paramObj)){return false;};var bcControl=_self.getBreadcrumbControl();if(bcControl!=null){bcControl.jBreadCrumb("enableHistory");}
g_restartParams['forward']="start";g_restartParams['workflowExecutionId']=paramObj.workflowExecutionId;window.location=_self.getActionUrl("EndWorkflowExecution",g_restartParams);},doCancel:function(paramObj){var onOk=function(){if(!_doFirstClassEventNotify("cancel",paramObj,false)){return false;}
_self.doEvent("cancel",paramObj);};_self.doConfirmDialog("dialogs.cancel.title","dialogs.cancel.message",onOk);},submitFeedback:function(rating,comments,stepId,successCallback,errorCallback){$.ajax({url:_self.getActionUrl("Feedback"),type:"POST",data:{context:g_context,text:comments,like:rating,stepId:stepId,},success:successCallback,error:errorCallback});return true;},doBack:function(signalValue){if(_self.isWorkflowActionExecuting()){return false;}
if(!_doFirstClassEventNotify("back")){return false;};if(!signalValue){signalValue="back";}
return _self.submitWFAction({signal:signalValue});},doNext:function(signalValue,paramObj){if(_self.isWorkflowActionExecuting()){return false;}
if(!signalValue){signalValue="next";}
if(paramObj==null){paramObj={};}
var evt=new jQuery.Event("next");var eventParams={"signal":signalValue,"params":paramObj};_triggerEventHandlers(evt,eventParams);if(evt.isDefaultPrevented()){return false;}
if(!_doEventNotify("next")){return false;};signalValue=eventParams["signal"];paramObj=eventParams["params"];if(signalValue==null||signalValue==""){signalValue="next";}
paramObj.signal=signalValue;return _self.submitWFAction(paramObj);},goToStep:function(flowStepID){if(stepInfo.stepID==flowStepID){return true;}
if(_self.isWorkflowActionExecuting()){return false;}
var paramObj={"flowStepID":flowStepID};if(!_doFirstClassEventNotify("breadcrumb",paramObj)){return false;};signalValue="goToStep";stepInfo.signal=signalValue;return _self.submitWFAction({signal:signalValue,targetStepID:flowStepID});},isDictionaryWindowOpen:function(){return dictionaryWindow!=null&&dictionaryWindow.open!=null&&!dictionaryWindow.closed;},openDictionary:function(){if(_self.isDictionaryWindowOpen()){dictionaryWindow.focus();}else{var attributes="width=800, height=600, scrollbars=yes, toolbar=no, directories=no, status=no, menubar=no";var params={context:g_context};dictionaryWindow=window.open(_self.getActionUrl("Dictionary",params),"Dictionary",attributes);$(window).unload(function(){if(_self.isDictionaryWindowOpen()){dictionaryWindow.close();}});}
return false;},getStepInfo:function(){return{engineProcId:stepInfo.engineProcId,procID:stepInfo.procID,flowName:stepInfo.flowName,runAsRoles:stepInfo.runAsRoles,stepName:stepInfo.stepName,stepSignal:stepInfo.signal};},setStepInfo:function(engineProcId,procId,flowName,runAsRoles,stepName,stepID){stepInfo.engineProcId=engineProcId;stepInfo.procID=procId;stepInfo.flowName=flowName;stepInfo.runAsRoles=runAsRoles;stepInfo.stepName=stepName;stepInfo.stepID=stepID;_triggerEventHandlers("newStep",_self.getStepInfo());},decodeStepInfo:function(param){var val=param;if(param!=null){val=decodeURIComponent(param.replace(/\+/g,"%20"));}
return val;},setStepInfoFromXHR:function(xhr){if(xhr==null)
return;var engineProcID=null,procID=null,flowName=null,runAsRoles=null,stepName=null,stepID=null;if((typeof xhr.getResponseHeader)!="undefined"){engineProcID=_self.decodeStepInfo(xhr.getResponseHeader("wf-engineProcId"));procID=_self.decodeStepInfo(xhr.getResponseHeader("wf-procId"));flowName=_self.decodeStepInfo(xhr.getResponseHeader("wf-flowName"));runAsRoles=_self.decodeStepInfo(xhr.getResponseHeader("wf-runAsRoles"));stepName=_self.decodeStepInfo(xhr.getResponseHeader("wf-stepName"));stepID=_self.decodeStepInfo(xhr.getResponseHeader("wf-stepID"));}
if(engineProcID!=null){_self.setStepInfo(engineProcID,procID,flowName,runAsRoles,stepName,stepID);}},cleanTemplateContext:function(){_self.local={};_self.localEvents=new jQuery("<span></span>");},cleanTinyMCELinks:function(){$("a[_mce_href]").each(function(){var encoded_href=$(this).attr("href");var plain_href=$(this).attr("_mce_href");$(this).attr("href",plain_href).attr("_mce_href",encoded_href);});$("img[_mce_src]").each(function(){var encoded_src=$(this).attr("src");var plain_src=$(this).attr("_mce_src");$(this).attr("src",plain_src).attr("_mce_src",encoded_src);});$("iframe[_mce_src]").each(function(){var encoded_src=$(this).attr("src");var plain_src=$(this).attr("_mce_src");$(this).attr("src",plain_src).attr("_mce_src",encoded_src);});},displayError:function(errorMsg){alert(errorMsg);},handleOnLoadParameterError:function(err){_self.handleError("Caught error while executing onLoad template parameter.",err);},handleOnSubmitParameterError:function(err){_self.handleError("Caught error while executing onSubmit template parameter.",err);},handleError:function(errMsg,err){if(logger!=null){logger.error(errMsg+" "+err);}},init:function(cfg){_self=this;if(smc&&smc.Logger){logger=smc.Logger;}
if(cfg.contextPath){g_contextPath=cfg.contextPath;}
if(cfg.actionMappings){for(var mapping in g_actionMappings){if(cfg.actionMappings[mapping]==null){var msg="Action Mapping for mapping '"+mapping+"' is not present";if(logger)
logger.error(msg);throw new Error(msg);}}
g_actionMappings=cfg.actionMappings;}
if(cfg.restartParams){g_restartParams=cfg.restartParams;workflowName=cfg.restartParams.workflow;}
if(cfg.context){g_context=cfg.context;}
if(cfg.breadcrumbControl){g_breadcrumbControl=cfg.breadcrumbControl;}
if(cfg.data){$.extend(this.data,cfg.data);}
if(cfg.rootElement){g_domContainerJQElement=$(cfg.rootElement);}
if(cfg.ajaxTimeout){g_ajaxTimeout=cfg.ajaxTimeout;}
this.startPoller();try{if(cfg.onInit&&typeof cfg.onInit=="function"){cfg.onInit.apply(this);}
if(window.parent.registerWF){window.parent.registerWF(this);}
_triggerEventHandlers("startExecution",{context:g_context,workflow:workflowName});}catch(e){logger.error(e);}
$("form").on("keypress",function(eventObject){var tag=eventObject.target.nodeName.toUpperCase();if(tag!=="TEXTAREA"&&eventObject.which==13){logger.debug("start.js init()::Enter key prevented on tag "+tag);return false;}});}};};jQuery.uaMatch=function(ua){ua=ua.toLowerCase();var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"};};if(!jQuery.browser){var
matched=jQuery.uaMatch(navigator.userAgent),browser={};if(matched.browser){browser[matched.browser]=true;browser.version=matched.version;}
if(browser.chrome){browser.webkit=true;}else if(browser.webkit){browser.safari=true;}
jQuery.browser=browser;}
if(!Motive)var Motive={};Motive.WorkflowBaseAdapter=function(){var logger=smc.Logger;var TEXT={FULL_HISTORY_TOOLTIP:"Full Workflow History",CALL_WRAPUP_PROMPT:"Do you really want to wrap up this call?"}
return{initUI:function(options){var bcOptions=new Object();bcOptions.minimumCompressionElements=5;bcOptions.beginingElementsToLeaveOpen=0;bcOptions.previewWidth=45;bcOptions.fullHistoryElement=this.$("#breadcrumb_fullHistory");if(options&&options.maxElementShow){bcOptions.maxElementShow=options.maxElementShow;}
if(options&&options.useCompression){bcOptions.useCompression=options.useCompression;}
var bcControl=this.getBreadCrumbElement().jBreadCrumb(bcOptions);bcControl.bind({"bcClick":$.proxy(function(evt,data){this.goToStep(data.stepID);},this)});this.setBreadcrumbControl(bcControl);this.$(".breadcrumbL").tooltip(TEXT.FULL_HISTORY_TOOLTIP);},doConfirmDialog:function(titleRsrcStr,messageRsrcStr,onOk){$('#aConfirmDialog').on('show.bs.modal',function(event){var modal=$(this);modal.find('.modal-title').text(smc.Resources.get(titleRsrcStr));modal.find('.modal-body').text(smc.Resources.get(messageRsrcStr));modal.find('#confirmDialogYes').off('click');modal.find('#confirmDialogYes').click(function(){$('.modal-open .modal-backdrop').remove();$('body').removeClass('modal-open');modal.modal('hide');onOk();});});$('#confirmDialogYes').click(function(){$('#aConfirmDialog').modal('hide');onOk();});$('#aConfirmDialog').on('hide.bs.modal',function(event){var modal=$(this);$('#confirmDialogYes').unbind('click');});$('#aConfirmDialog').modal('show');},doAlertDialog:function(exceptionName,messageRsrcStr,exceptionMsg){$('#alertDialog').on('show.bs.modal',function(event){var modal=$(this);var msg='<p>'+messageRsrcStr+'</p><p>'+exceptionName+': '+exceptionMsg+'</p>';modal.find('.modal-title').text(exceptionName);modal.find('.modal-body').html(msg);modal.find('#confirmDialogOK').off('click');modal.find('#confirmDialogOK').click(function(){modal.modal('hide');});});$('#confirmDialogOK').click(function(){$('#alertDialog').modal('hide');});$('#alertDialog').on('hide.bs.modal',function(event){var modal=$(this);$('#confirmDialogOK').unbind('click');});$('#alertDialog').modal('show');},drawStepContent:function(content,options){var self=this;var wfArea=this.getTemplateContentArea();var bcControl=this.getBreadcrumbControl();hideFullHistory();if(wfArea.text().lenght>0){wfArea.css({"left":"-500px"});}
wfArea.css({"left":"2500px"});wfArea.animate({"left":"0"},800);wfArea.html(content);wfArea.fadeIn(500,function(){if(options&&options.disableBreadcrumb){bcControl.jBreadCrumb("disable");}});var navArea=this.$(".buttons");var btns={back:navArea.find("#back_button"),next:navArea.find("#next_button"),suspend:navArea.find("#suspend_button"),cancel:navArea.find("#cancel_button")};btns.back.bind({"click":function(){self.doBack();return false;}});btns.suspend.bind({"click":function(){self.doSuspend();return false;}});btns.cancel.bind({"click":function(){self.doCancel();return false;}});btns.next.bind({"click":function(){self.doNext();return false;}});var numBreadCrumbs=bcControl.jBreadCrumb("getNumCrumbs");if(numBreadCrumbs>1){btns.back.show();}else{btns.back.hide();}},getTemplateContentArea:function(){return this.$("#workflow-area");},getBreadCrumbElement:function(){return this.$("#breadcrumb");}};};if(!Motive)var Motive={};Motive.FeedbackModule=function(wf){var logger=smc.Logger;var feedbackInProgress=false;var feedbackEnabled=true;var isNote=false;var notes="";return{init:function(){this.getFeedbackElement(".feedbackError").slideUp();var dislike=this.getFeedbackElement(".feedback_dislike");dislike.bind("click",function(e){wf.$(".feedback_comments_showHide").slideDown(600);});var like=this.getFeedbackElement(".feedback_like");like.bind("click",function(e){wf.$(".feedback_comments_showHide").slideDown(600);});wf.$(".commentsText").bind("keyup",function(e){var count=4000;var redZoneMargin=50;var feedbackText=wf.$(".commentsText").val();var feedbackTextLength=feedbackText.length;if(feedbackTextLength>count){feedbackText=feedbackText.substring(0,count);return false;}
if((count-feedbackTextLength)>redZoneMargin)wf.$(".limit").css('color','grey');if((count-feedbackTextLength)<=redZoneMargin)wf.$(".limit").css('color','red');wf.$(".limit").text("[ "+(count-feedbackTextLength)+" / "+count+" ]");});this.getFeedbackElement(".submit_feedback").click($.proxy(this._handleSubmitFeedback,this,"submit"));this.getFeedbackElement(".cancel_feedback").click($.proxy(this._handleCancelFeedback,this,"cancel"));var btns=this.getFeedbackElement(".feedback_like, .feedback_dislike");var data={self:this};btns.mouseover(data,this._onFeedbackBtnOver);btns.mouseout(data,this._onFeedbackBtnOut);btns.click(data,this._onLikeDislikeClick);},initFeedback:function(offset){this.getFeedbackElement(".feedbackStatus").hide();this.getFeedbackContainer().css({"top":offset.top-10,"left":offset.left-250});this.getFeedbackContainer().slideDown(600);},getFeedbackContainer:function(){return wf.$(".feedback");},getFeedbackElement:function(selector){return this.getFeedbackContainer().find(selector);},_handleSubmitFeedback:function(event){var like;var theComments=this.getFeedbackElement(".commentsText").val();var stepId=null;var self=this;feedbackInProgress=true;if(this.getFeedbackElement(".feedback_like").hasClass("active")){like=true;}else if(this.getFeedbackElement(".feedback_dislike").hasClass("active")){like=false;}else{this.getFeedbackElement(".feedbackError").html("Choose <b>Like</b> or <b>Not Helpful</b>").slideDown(600);feedbackInProgress=false;return;}
if((/^\s*$/).test(theComments)){this.getFeedbackElement(".feedbackError").html("Please provide some input in Comments").slideDown(600);feedbackInProgress=false;return;}
wf.submitFeedback(like,theComments,stepId,function(){self._hideFeedback();feedbackInProgress=false;like=null;self.getFeedbackElement(".feedbackError").hide();self._showFeedbackStatus();self.getFeedbackElement(".commentsText").val("");self.getFeedbackElement(".limit").text("");self.getFeedbackElement(".feedback_like").removeClass("active");self.getFeedbackElement(".feedback_dislike").removeClass("active");wf.$(".feedback").delay(3000).slideUp(600);},function(){feedbackInProgress=false;like=null;self.getFeedbackElement(".feedbackError").html("Error Submitting Feedback").slideDown(600);self._showFeedback();});},_onFeedbackBtnOver:function(event){if(feedbackEnabled)
$(this).addClass("feedback_btnOver");},_onFeedbackBtnOut:function(event){$(this).removeClass("feedback_btnOver");},_onLikeDislikeClick:function(event){if(!feedbackInProgress&&feedbackEnabled){var self=event.data.self;self.getFeedbackElement(".feedback_comments_showHide").slideDown();self.getFeedbackElement(".feedback_like").removeClass("active");self.getFeedbackElement(".feedback_dislike").removeClass("active");$(this).addClass("active");self.getFeedbackElement(".feedbackError").slideUp(600);}},_hideFeedback:function(){this.getFeedbackElement(".feedback_comments_showHide").slideUp();this.getFeedbackElement(".feedback_like").removeClass("active");this.getFeedbackElement(".feedback_dislike").removeClass("active");},_handleCancelFeedback:function(event){this.getFeedbackElement(".commentsText").val('');this.getFeedbackContainer().slideUp();this.getFeedbackElement(".limit").text("");this.getFeedbackElement(".feedbackError").slideUp();this.getFeedbackElement(".feedback_comments_showHide").slideUp();this.getFeedbackElement(".feedback_like").removeClass("active");this.getFeedbackElement(".feedback_dislike").removeClass("active");},_showFeedbackStatus:function(){this.getFeedbackElement(".feedbackStatus").delay(600).slideDown().delay(4000).slideUp();this.getFeedbackElement(".feedbackStatus").removeAttr("style");},_showFeedback:function(){if(!feedbackInProgress&&feedbackEnabled){this.getFeedbackElement(".feedback_comments_showHide").slideDown();this.getFeedbackElement(".feedback_like").removeClass("active");this.getFeedbackElement(".feedback_dislike").removeClass("active");}},disableFeedback:function(){this._hideFeedback();feedbackEnabled=false;},_enableFeedback:function(){feedbackEnabled=true;}};}
window.onload=function(){checkHeight();checkWidth();};window.onresize=function(){checkHeight();checkWidth();};function checkHeight(){var ffHeightOffset=261;var ieHeightOffset=261;if(window.innerHeight){$("#contentInner").css("height",window.innerHeight-ffHeightOffset+"px");}
else if(document.body.clientHeight){$("#contentInner").css("height",document.body.clientHeight-ieHeightOffset+"px");}}
function checkWidth(){var wfMinWidth=715;var scrollBarOffset=20;if(window.innerWidth){if(window.innerWidth<wfMinWidth){$("#header").css("width",wfMinWidth-scrollBarOffset+"px");$("#loginRow").css("width",wfMinWidth-scrollBarOffset+"px");$("#content").css("width",wfMinWidth-22-scrollBarOffset+"px");$("#footer").css("width",wfMinWidth-scrollBarOffset+"px");}
else{$("#header").css("width","auto");$("#loginRow").css("width","auto");$("#content").css("width","auto");$("#footer").css("width","100%");}}
else if(document.body.clientWidth){if(document.body.clientWidth<wfMinWidth){$("#header").css("width",wfMinWidth+"px");$("#loginRow").css("width",wfMinWidth+"px");$("#content").css("width",wfMinWidth+"px");$("#footer").css("width",wfMinWidth+"px");}
else{$("#header").css("width","auto");$("#loginRow").css("width","auto");$("#content").css("width","auto");$("#footer").css("width","100%");}}}
function onBreadcrumbOver(ele){if($(ele).hasClass("bc_back")){$(ele).addClass("bc_back_on");}
if($(ele).hasClass("bc_forward")){$(ele).addClass("bc_forward_on");}}
function onBreadcrumbOut(ele){if($(ele).hasClass("bc_back")){$(ele).removeClass("bc_back_on");}
if($(ele).hasClass("bc_forward")){$(ele).removeClass("bc_forward_on");}}
function onFullHistoryIconOver(ele){$(ele).addClass("breadcrumbL_on");}
function onFullHistoryIconOut(ele){$(ele).removeClass("breadcrumbL_on");}
function showHideFullHistory(){$("#breadcrumb_fullHistory").slideToggle(400,function(){$("#breadcrumb_fullHistoryIcon").toggleClass("expanded");});}
function hideFullHistory(){$("#breadcrumb_fullHistory:visible").slideUp(400,function(){$("#breadcrumb_fullHistoryIcon").removeClass("expanded");});}
$.fn.extend({tooltip:function(attr){var $this=$(this);var tooltipMarkup="<div id='tooltip'><div class='tooltipTL'><div class='tooltipTR'></div></div><div class='tooltipContent'></div><div class='tooltipBL'><div class='tooltipBR'><div class='tooltipArrow'></div></div></div></div>";var $tooltipElem=($("#tooltip").length>0)?$("#tooltip"):$(tooltipMarkup).appendTo("body");$tooltipElem.find(".tooltipContent").html(attr).height();$this.data({text:attr,height:$tooltipElem.find(".tooltipContent").html(attr).height()});var positionTop=-42;var positionLeft=-50;$this.bind("mouseenter",function(event){var $this=$(this);var tooltipClass="tooltipRight";if($this.offset().left>((document.body.offsetWidth/2)+134)){tooltipClass="tooltipLeft";positionLeft=-150;}
$tooltipElem.addClass(tooltipClass).find(".tooltipContent").html($this.data("text")).css({top:event.pageY+positionTop-$this.data("height"),left:event.pageX+positionLeft});}).bind("mousemove",function(event){$tooltipElem.css({top:event.pageY+positionTop-$(this).data("height"),left:event.pageX+positionLeft});}).bind("mouseleave",function(){$tooltipElem.removeClass("tooltipLeft tooltipRight").css({top:"-99999px",left:"-99999px"}).find(".tooltipContent").empty();});return $this;}});